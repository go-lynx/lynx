lynx:
  log:
    level: info                 # debug/info/warn/error
    console_output: true        # output to console
    # file output is enabled when file_path is non-empty
    file_path: logs/lynx.log
    max_size_mb: 128            # MB, proto: max_size_mb
    max_age_days: 7             # days, proto: max_age_days
    max_backups: 5
    compress: true

    # NEW: Time-based rotation configuration
    rotation_strategy: "both"   # "size" | "time" | "both"
                                 # - "size": Rotate when file reaches max_size_mb (default)
                                 # - "time": Rotate based on rotation_interval
                                 # - "both": Rotate when either condition is met
    rotation_interval: "daily"  # "hourly" | "daily" | "weekly"
                                 # Only used when rotation_strategy is "time" or "both"
    
    # NEW: Maximum total size of all log files in MB (0 = unlimited)
    # When exceeded, oldest files will be deleted
    max_total_size_mb: 1024     # 1GB total limit

    # NEW: Log format configuration
    format:
      type: "json"              # "json" (default) | "text" | "pretty"
      console_format: "pretty"   # Console format (can differ from file format)
      console_color: true        # Enable color output for console (pretty/text only)

    timezone: Asia/Shanghai     # e.g. Asia/Shanghai, UTC; if not configured, use local timezone
    caller_skip: 5

    stack:
      enable: true
      skip: 6
      max_frames: 32
      level: error              # Output stack trace when reaching this level or above
      filter_prefixes:
        - github.com/go-kratos/kratos
        - github.com/rs/zerolog
        - github.com/go-lynx/lynx/log

    sampling:
      enable: true
      info_ratio: 0.5           # 50% keep info
      debug_ratio: 0.2          # 20% keep debug
      max_info_per_sec: 50       # Max 50 info logs per second (0=no limit)
      max_debug_per_sec: 20      # Max 20 debug logs per second (0=no limit)

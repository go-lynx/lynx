# gRPC Client Plugin Configuration Example
lynx:
  grpc:
    client:
      # Default timeout for gRPC client requests
      default_timeout: "10s"
      
      # Default keep-alive interval for gRPC connections
      default_keep_alive: "30s"
      
      # Maximum number of retries for failed requests
      max_retries: 3
      
      # Backoff duration between retries
      retry_backoff: "1s"
      
      # Maximum number of connections per service (channel pool size)
      # This controls how many connections are maintained for each service
      # Recommended: 3-10 for most services, 10-50 for high-traffic services
      max_connections: 5
      
      # Enable TLS for gRPC client connections
      tls_enable: false
      
      # TLS authentication type (0-4)
      tls_auth_type: 0
      
      # Enable connection pooling (multi-channel pool)
      # When enabled, each service can have multiple connections (channels)
      # This improves performance and fault tolerance
      connection_pooling: true
      
      # Maximum number of services in the pool
      # This limits the total number of services that can have connection pools
      pool_size: 10
      
      # Connection idle timeout
      idle_timeout: "60s"
      
      # Enable health checking for connections
      health_check_enabled: true
      
      # Health check interval
      health_check_interval: "30s"
      
      # Enable metrics collection
      metrics_enabled: true
      
      # Enable distributed tracing
      tracing_enabled: true
      
      # Enable request logging
      logging_enabled: true
      
      # Maximum message size in bytes (default: 4MB)
      max_message_size: 4194304
      
      # Enable compression
      compression_enabled: false
      
      # Compression type (gzip, deflate, etc.)
      compression_type: "gzip"

# Example service subscriptions configuration
subscriptions:
  grpc:
    - service: "user-service"
      tls: false
      required: true
      ca_name: ""
      ca_group: ""
    - service: "order-service"
      tls: true
      required: true
      ca_name: "order-ca"
      ca_group: "certificates"
    - service: "payment-service"
      tls: true
      required: false
      ca_name: "payment-ca"
      ca_group: "certificates"


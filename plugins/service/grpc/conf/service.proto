syntax = "proto3";

package lynx.protobuf.plugin.grpc.service;

option go_package = "github.com/go-lynx/lynx/plugins/service/grpc/conf;conf";

import "google/protobuf/duration.proto";

// The service message defines the configuration information for the gRPC service plugin.
message service {
  // Network specifies the network type (e.g., "tcp", "unix") for the gRPC server to listen on.
  string network = 1;

  // Addr specifies the address for the gRPC server to listen on (e.g., ":9090", "localhost:9090").
  string addr = 2;

  // Tls indicates whether TLS/GRPCS encryption is enabled.
  bool tls_enable = 3;

  // TlsAuthType specifies the TLS client authentication type. Different values represent different authentication strategies:
  // 0: No client authentication
  // 1: Request client certificate, but not mandatory
  // 2: Require client certificate
  // 3: Verify client certificate
  // 4: Verify client certificate if provided
  int32 tls_auth_type = 4;

  // Timeout specifies the maximum duration for handling gRPC requests. Requests may be terminated if they exceed this duration.
  google.protobuf.Duration timeout = 5;

  // MaxConcurrentStreams specifies the maximum number of concurrent streams that can be initiated on a single HTTP/2 connection.
  // This is an important parameter for controlling server resource usage and preventing overload.
  // Default value is 0 (unlimited), but it's recommended to set a reasonable limit based on your server capacity.
  // Typical values range from 100 to 10000 depending on your use case.
  uint32 max_concurrent_streams = 6;

  // MaxRecvMsgSize specifies the maximum size (in bytes) of a single inbound gRPC message.
  // Default is 0 (use server default ~4MB). Set this to protect the server from oversized payloads.
  uint32 max_recv_msg_size = 7;

  // MaxSendMsgSize specifies the maximum size (in bytes) of a single outbound gRPC message.
  // Default is 0 (use server default ~4MB). Set this to ensure responses stay within expected limits.
  uint32 max_send_msg_size = 8;
}

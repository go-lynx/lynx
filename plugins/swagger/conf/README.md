# Swagger Plugin Configuration Description

## Configuration Files

This directory contains configuration-related files for the Swagger plugin:

### File List

1. **swagger.proto** - Protobuf configuration definition file
2. **swagger.pb.go** - Auto-generated Go code (generated by protoc)
3. **swagger.yml** - Complete configuration example (includes all available options)
4. **swagger-simple.yml** - Simple configuration example (quick start)

## Configuration Usage Methods

### 1. Using Configuration in Projects

Create a `config.yaml` or `config.yml` file in your project root directory, referencing the examples in this directory for configuration:

```yaml
# config.yaml
lynx:
  swagger:
    enabled: true
    gen:
      scan_dirs: ["./controllers"]
      output_path: "./docs/swagger.json"
    ui:
      enabled: true
      port: 8080
      path: "/swagger"
```

### 2. Configuration Priority

Configuration loading priority (from high to low):
1. Environment variables
2. Command line arguments
3. Configuration file (config.yaml)
4. Default values

### 3. Main Configuration Items Description

#### Basic Configuration
- `enabled`: Whether to enable the plugin
- `gen.enabled`: Whether to enable documentation generation
- `ui.enabled`: Whether to enable UI service

#### Scan Configuration
- `gen.scan_dirs`: List of directories to scan
- `gen.exclude_dirs`: Excluded directories
- `gen.recursive`: Whether to scan recursively

#### UI Configuration
- `ui.port`: UI service port
- `ui.path`: UI access path
- `ui.title`: Page title

#### API Information
- `info.title`: API title
- `info.version`: API version
- `info.description`: API description

### 4. Environment Variable Configuration

Supports overriding configuration via environment variables:

```bash
# Enable Swagger
export LYNX_SWAGGER_ENABLED=true

# Set UI port
export LYNX_SWAGGER_UI_PORT=8080

# Set scan directories
export LYNX_SWAGGER_GEN_SCAN_DIRS="./controllers,./handlers"
```

### 5. Minimal Configuration Example

```yaml
lynx:
  swagger:
    enabled: true
```

This will use default configuration:
- Scan current directory
- Output to `./docs/swagger.json`
- UI service at `http://localhost:8080/swagger`

### 6. Production Environment Configuration Recommendations

```yaml
lynx:
  swagger:
    enabled: true
    gen:
      enabled: false  # Disable auto-generation in production
      watch_enabled: false  # Disable file monitoring
    ui:
      enabled: true
      port: 8080
      path: "/api-docs"  # Use different path
    security_definitions:
      bearer_auth:
        type: "apiKey"
        name: "Authorization"
        in: "header"
    security:
      - bearer_auth: []  # Enable authentication
```

### 7. Development Environment Configuration Recommendations

```yaml
lynx:
  swagger:
    enabled: true
    gen:
      enabled: true
      watch_enabled: true  # Enable hot updates
      watch_interval: 3s
    ui:
      enabled: true
      auto_refresh: true  # Auto-refresh UI
      refresh_interval: 3000
    advanced:
      pretty_json: true  # Beautify output
      validate_spec: true  # Validate specification
```

## Configuration Validation

Use the following commands to validate if the configuration is correct:

```bash
# Validate configuration file format
go run main.go --validate-config

# View final effective configuration
go run main.go --show-config
```

## Common Issues

### Q: How to disable Swagger in production environment?
A: Set `enabled: false` or environment variable `LYNX_SWAGGER_ENABLED=false`

### Q: How to change UI access address?
A: Modify `ui.port` and `ui.path` configuration

### Q: How to add API authentication?
A: Configure `security_definitions` and `security` options

### Q: Documentation not updating automatically?
A: Ensure `gen.watch_enabled: true` and have file write permissions

## More Information

- [Swagger Plugin Documentation](../README.md)
- [OpenAPI Specification](https://swagger.io/specification/v2/)
- [Lynx Framework Documentation](https://lynx.io/docs)
